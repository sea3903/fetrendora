<app-header></app-header>

<div class="password-page">
    <div class="password-container">

        <!-- Tiêu đề trang -->
        <div class="page-header">
            <h1>{{ 'PROFILE.CHANGE_PASSWORD_TITLE' | translate }}</h1>
            <p class="subtitle">{{ 'PROFILE.CHANGE_PASSWORD_DESC' | translate }}</p>
        </div>

        <!-- Loading -->
        <div class="loading-container" *ngIf="loading">
            <div class="spinner-large"></div>
        </div>

        <!-- Card đổi mật khẩu -->
        <div class="password-card" *ngIf="!loading">
            <form (ngSubmit)="changePassword()" #passwordForm="ngForm">

                <!-- Mật khẩu hiện tại -->
                <div class="form-group">
                    <label>{{ 'PROFILE.CURRENT_PASSWORD' | translate }} <span class="required">*</span></label>
                    <input type="password" name="currentPassword" [(ngModel)]="currentPassword"
                        (blur)="validateCurrentPassword()" (input)="validateCurrentPassword()"
                        [placeholder]="'PROFILE.CURRENT_PASSWORD' | translate" [class.error]="currentPwdError">
                    <span class="error-text" *ngIf="currentPwdError">{{ currentPwdError }}</span>
                </div>

                <!-- Mật khẩu mới -->
                <div class="form-group">
                    <label>{{ 'PROFILE.NEW_PASSWORD' | translate }} <span class="required">*</span></label>
                    <input type="password" name="newPassword" [(ngModel)]="newPassword" (blur)="validateNewPassword()"
                        (input)="validateNewPassword()" [placeholder]="'PROFILE.NEW_PASSWORD' | translate"
                        [class.error]="newPwdError">
                    <span class="error-text" *ngIf="newPwdError">{{ newPwdError }}</span>
                </div>

                <!-- Xác nhận mật khẩu mới -->
                <div class="form-group">
                    <label>{{ 'PROFILE.CONFIRM_PASSWORD' | translate }} <span class="required">*</span></label>
                    <input type="password" name="confirmPassword" [(ngModel)]="confirmPassword"
                        (blur)="validateConfirmPassword()" (input)="validateConfirmPassword()"
                        [placeholder]="'PROFILE.CONFIRM_PASSWORD' | translate" [class.error]="confirmPwdError">
                    <span class="error-text" *ngIf="confirmPwdError">{{ confirmPwdError }}</span>
                </div>

                <!-- Nút đổi mật khẩu -->
                <button type="submit" class="btn-primary" [disabled]="changingPassword">
                    <span *ngIf="changingPassword" class="spinner"></span>
                    {{ 'PROFILE.CHANGE_PASSWORD_TITLE' | translate }}
                </button>

            </form>

            <!-- Link quay lại -->
            <div class="back-link">
                <a routerLink="/user-profile">← {{ 'PROFILE.BACK_TO_PROFILE' | translate }}</a>
            </div>
        </div>
    </div>
</div>

<app-footer></app-footer>