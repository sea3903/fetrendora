<div class="admin-profile-page">
    <div class="page-header">
        <h2>Thông tin cá nhân</h2>
        <p class="subtitle">Quản lý thông tin tài khoản của bạn</p>
    </div>

    <!-- Loading -->
    <div class="loading-container" *ngIf="loading">
        <div class="spinner"></div>
    </div>

    <!-- Profile Form -->
    <div class="profile-card" *ngIf="!loading && userResponse">
        <form (ngSubmit)="saveProfile()">
            <!-- Avatar -->
            <div class="avatar-section">
                <div class="avatar-wrapper">
                    <img [src]="avatarUrl" alt="Avatar" class="avatar-image" (error)="onImageError($event)">
                    <label class="avatar-upload">
                        <input type="file" accept="image/*" (change)="onFileSelected($event)" hidden>
                        <i class="fas fa-camera"></i>
                    </label>
                </div>
            </div>

            <!-- Form Fields -->
            <div class="form-grid">
                <div class="form-group">
                    <label>Họ và tên <span class="required">*</span></label>
                    <input type="text" [(ngModel)]="fullName" name="fullName" (blur)="validateFullName()"
                        (input)="validateFullName()" [class.error]="fullNameError" placeholder="Nhập họ và tên">
                    <span class="error-text" *ngIf="fullNameError">{{ fullNameError }}</span>
                </div>

                <div class="form-group">
                    <label>Email</label>
                    <input type="email" [(ngModel)]="email" name="email" readonly class="readonly" placeholder="Email">
                </div>

                <div class="form-group">
                    <label>Số điện thoại</label>
                    <input type="tel" [(ngModel)]="phoneNumber" name="phoneNumber" (blur)="validatePhone()"
                        (input)="validatePhone()" [class.error]="phoneError" placeholder="Nhập số điện thoại">
                    <span class="error-text" *ngIf="phoneError">{{ phoneError }}</span>
                </div>

                <div class="form-group">
                    <label>Ngày sinh</label>
                    <input type="date" [(ngModel)]="dateOfBirth" name="dateOfBirth" (change)="validateDateOfBirth()"
                        [class.error]="dateOfBirthError">
                    <span class="error-text" *ngIf="dateOfBirthError">{{ dateOfBirthError }}</span>
                </div>

                <div class="form-group full-width">
                    <label>Địa chỉ</label>
                    <input type="text" [(ngModel)]="address" name="address" placeholder="Nhập địa chỉ">
                </div>
            </div>

            <!-- Actions -->
            <div class="form-actions">
                <a routerLink="/admin/change-password" class="btn-secondary">
                    <i class="fas fa-key"></i> Đổi mật khẩu
                </a>
                <button type="submit" class="btn-primary" [disabled]="saving">
                    <span *ngIf="saving" class="spinner-small"></span>
                    <i *ngIf="!saving" class="fas fa-save"></i>
                    {{ saving ? 'Đang lưu...' : 'Lưu thay đổi' }}
                </button>
            </div>
        </form>
    </div>
</div>