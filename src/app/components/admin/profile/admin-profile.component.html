<div class="admin-profile-page">
    <div class="page-header">
        <h2>{{ 'PROFILE.TITLE' | translate }}</h2>
        <p class="subtitle">{{ 'PROFILE.PERSONAL_INFO' | translate }}</p>
    </div>

    <!-- Loading -->
    <div class="loading-container" *ngIf="loading">
        <div class="spinner"></div>
    </div>

    <!-- Profile Form -->
    <div class="profile-card" *ngIf="!loading && userResponse">
        <form (ngSubmit)="saveProfile()">
            <!-- Avatar -->
            <div class="avatar-section">
                <div class="avatar-wrapper">
                    <img [src]="avatarUrl" alt="Avatar" class="avatar-image" (error)="onImageError($event)">
                    <label class="avatar-upload">
                        <input type="file" accept="image/*" (change)="onFileSelected($event)" hidden>
                        <i class="fas fa-camera"></i>
                    </label>
                </div>
            </div>

            <!-- Form Fields -->
            <div class="form-grid">
                <div class="form-group">
                    <label>{{ 'REGISTER.FULLNAME' | translate }} <span class="required">*</span></label>
                    <input type="text" [(ngModel)]="fullName" name="fullName" (blur)="validateFullName()"
                        (input)="validateFullName()" [class.error]="fullNameError"
                        [placeholder]="'REGISTER.FULLNAME_PLACEHOLDER' | translate">
                    <span class="error-text" *ngIf="fullNameError">{{ fullNameError }}</span>
                </div>

                <div class="form-group">
                    <label>{{ 'REGISTER.EMAIL' | translate }}</label>
                    <input type="email" [(ngModel)]="email" name="email" readonly class="readonly" placeholder="Email">
                </div>

                <div class="form-group">
                    <label>{{ 'REGISTER.PHONE' | translate }}</label>
                    <input type="tel" [(ngModel)]="phoneNumber" name="phoneNumber" (blur)="validatePhone()"
                        (input)="validatePhone()" [class.error]="phoneError"
                        [placeholder]="'REGISTER.PHONE_PLACEHOLDER' | translate">
                    <span class="error-text" *ngIf="phoneError">{{ phoneError }}</span>
                </div>

                <div class="form-group">
                    <label>{{ 'PROFILE.DOB' | translate }}</label>
                    <input type="date" [(ngModel)]="dateOfBirth" name="dateOfBirth">
                </div>

                <div class="form-group full-width">
                    <label>{{ 'REGISTER.ADDRESS' | translate }}</label>
                    <input type="text" [(ngModel)]="address" name="address"
                        [placeholder]="'REGISTER.ADDRESS_PLACEHOLDER' | translate">
                </div>
            </div>

            <!-- Actions -->
            <div class="form-actions">
                <a routerLink="/admin/change-password" class="btn-secondary">
                    <i class="fas fa-key"></i> {{ 'NAV.CHANGE_PASSWORD' | translate }}
                </a>
                <button type="submit" class="btn-primary" [disabled]="saving">
                    <span *ngIf="saving" class="spinner-small"></span>
                    <i *ngIf="!saving" class="fas fa-save"></i>
                    {{ saving ? ('COMMON.LOADING' | translate) : ('COMMON.SAVE' | translate) }}
                </button>
            </div>
        </form>
    </div>
</div>