<div class="admin-change-password-page">
    <div class="page-header">
        <h2>Đổi mật khẩu</h2>
        <p class="subtitle">Cập nhật mật khẩu tài khoản của bạn</p>
    </div>

    <!-- Loading -->
    <div class="loading-container" *ngIf="loading">
        <div class="spinner"></div>
    </div>

    <!-- Change Password Form -->
    <div class="password-card" *ngIf="!loading">
        <form (ngSubmit)="changePassword()">
            <div class="form-group">
                <label>Mật khẩu hiện tại <span class="required">*</span></label>
                <input type="password" [(ngModel)]="currentPassword" name="currentPassword"
                    (blur)="validateCurrentPassword()" (input)="validateCurrentPassword()"
                    [class.error]="currentPwdError" placeholder="Nhập mật khẩu hiện tại">
                <span class="error-text" *ngIf="currentPwdError">{{ currentPwdError }}</span>
            </div>

            <div class="form-group">
                <label>Mật khẩu mới <span class="required">*</span></label>
                <input type="password" [(ngModel)]="newPassword" name="newPassword" (blur)="validateNewPassword()"
                    (input)="validateNewPassword()" [class.error]="newPwdError" placeholder="Nhập mật khẩu mới">
                <span class="error-text" *ngIf="newPwdError">{{ newPwdError }}</span>
            </div>

            <div class="form-group">
                <label>Xác nhận mật khẩu <span class="required">*</span></label>
                <input type="password" [(ngModel)]="confirmPassword" name="confirmPassword"
                    (blur)="validateConfirmPassword()" (input)="validateConfirmPassword()"
                    [class.error]="confirmPwdError" placeholder="Nhập lại mật khẩu mới">
                <span class="error-text" *ngIf="confirmPwdError">{{ confirmPwdError }}</span>
            </div>

            <!-- Actions -->
            <div class="form-actions">
                <a routerLink="/admin/profile" class="btn-secondary">
                    <i class="fas fa-arrow-left"></i> Quay lại
                </a>
                <button type="submit" class="btn-primary" [disabled]="changingPassword">
                    <span *ngIf="changingPassword" class="spinner-small"></span>
                    <i *ngIf="!changingPassword" class="fas fa-key"></i>
                    {{ changingPassword ? 'Đang xử lý...' : 'Đổi mật khẩu' }}
                </button>
            </div>
        </form>
    </div>
</div>